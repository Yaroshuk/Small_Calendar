var Calendar=function(){function t(t,e,a){Date.apply(this,arguments)}function e(t,e,a){this._year=t,this._month=e,this._date=new Date(t,this._month),this._elem=a,this._createCalendar=this._createCalendar.bind(this),this._createCalendar(),this._table.addEventListener("click",this._clickEvent.bind(this))}return Date.prototype.getFullDay=function(){return 33-new Date(this.getFullYear(),this.getMonth(),33).getDate()},t.prototype=Object.create(Date.prototype),t.prototype.constructor=t,e.prototype._createCalendar=function(){this._table||(this._table=document.createElement("table"),this._table.id="simpleCalendar",this._elem.appendChild(this._table),console.log("createTable"));var t="<thead><tr><td><div class='scArrLeft scYearChange'></div></td><td colspan='5' class='scYear'>"+this._year+"</td><td><div class='scArrRight scYearChange'></div></td></tr><tr><td><div class='scArrLeft scMonthChange'></div></td><td colspan='5' class='scMonth'>"+this._getMonth(this._month)+"</td><td><div class='scArrRight scMonthChange'></div></td></tr><tr><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th><th>Su</th></tr><tr></thead>";t+="<tbody>";var e=this._getDay(this._date);for(e>0&&(t+="<th colspan="+e+"></th>");this._date.getMonth()===this._month;)t+="<td>"+this._date.getDate()+"</td>",6===this._getDay(this._date)&&this._date.getDate()!==this._date.getFullDay()&&(t+="</tr><tr>"),this._date.setDate(this._date.getDate()+1);this._date.setDate(this._date.getDate()-1),this._getDay(this._date)<6&&(t+="<th colspan="+(6-this._getDay(this._date))+"></th>"),t+="</tr></tbody></table>",this._table.innerHTML=t},e.prototype._clickEvent=function(t){var e=t.target;if(e.closest("thead"))e.classList.contains("scYearChange")?e.classList.contains("scArrLeft")?this._prevYear():e.classList.contains("scArrRight")&&this._nextYear():e.classList.contains("scMonthChange")&&(e.classList.contains("scArrLeft")?this._prevMonth():e.classList.contains("scArrRight")&&this._nextMonth());else{if("TD"!==e.tagName)return;var a=document.createEvent("CustomEvent");a.initCustomEvent("selectDate",!0,!0,{formatDate:this._formatDate(+e.innerHTML,this._month,this._year)}),this._elem.dispatchEvent(a)}},e.prototype._prevMonth=function(){this._month>0&&this.setDate(this._year,this._month-1)},e.prototype._nextMonth=function(){this._month<11&&this.setDate(this._year,this._month+1)},e.prototype._prevYear=function(){this.setDate(--this._year,this._month)},e.prototype._nextYear=function(){this.setDate(++this._year,this._month)},e.prototype._redrawCalendar=function(){this._date=new Date(this._year,this._month),this._createCalendar(),0===this._month&&this._table.querySelector(".scArrLeft.scMonthChange").classList.add("hidden"),11===this._month&&this._table.querySelector(".scArrRight.scMonthChange").classList.add("hidden")},e.prototype.setDate=function(t,e){console.log(this._month),0>e||e>11||(this._year=t,this._month=e,console.log(this._month),this._redrawCalendar())},e.prototype._formatDate=function(t,e,a){var t=10>t?"0"+t:t,e=10>e+1?"0"+ ++e:++e;return t+"-"+e+"-"+a},e.prototype._getMonth=function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];return e[t]},e.prototype._getDayOfWeek=function(t){var e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e[this._getDay(new Date(this._year,this._month,t))]},e.prototype._getDay=function(t){var e=t.getDay();return 0===e&&(e=7),e-1},e}();