var Calendar=function(){function t(t,e,a){this._year=t,this._month=e,this._date=new Date(t,this._month),this._oldDate,this._eventName,this._elem=a,this._createCalendar(),0===this._month&&this._table.querySelector(".scArrLeft.scMonthChange").classList.add("hidden"),11===this._month&&this._table.querySelector(".scArrRight.scMonthChange").classList.add("hidden"),this._table.addEventListener("click",this._clickEvent.bind(this))}return Date.prototype.getFullDay=function(){return 33-new Date(this.getFullYear(),this.getMonth(),33).getDate()},Date.prototype.getNewMonth=function(){var t=["January","February","March","April","May","June","July","August","September","October","November","December"];return t[this.getMonth()]},Date.prototype.getDayOfWeek=function(){var t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return t[this.getNewDay()]},Date.prototype.getNewDay=function(){var t=this.getDay();return 0===t&&(t=7),t-1},Date.prototype.getFormatDate=function(t){var e;if(t)e=t.replace(/[dmy]+/g,function(){var t;switch(arguments[0]){case"dd":t=this.getDate()<10?"0"+this.getDate():this.getDate();break;case"ddd":t=(""+this.getDayOfWeek()).slice(0,3);break;case"dddd":t=this.getDayOfWeek();break;case"mm":t=s=this.getMonth()+1<10?"0"+(this.getMonth()+1):this.getMonth()+1;break;case"mmm":t=(""+this.getNewMonth()).slice(0,3);break;case"mmmm":t=this.getNewMonth();break;case"yy":t=(""+this.getFullYear()).slice(2);break;case"yyyy":t=this.getFullYear();break;default:t="????"}return t}.bind(this));else{var a=this.getDate()<10?"0"+this.getDate():this.getDate(),s=this.getMonth()+1<10?"0"+(this.getMonth()+1):this.getMonth()+1;e=a+"-"+s+"-"+this.getFullYear()}return e},t.prototype._createCalendar=function(){this._table||(this._table=document.createElement("table"),this._table.id="simpleCalendar",this._elem.appendChild(this._table),console.log("createTable"));var t="<thead><tr><td><div class='scArrLeft scYearChange'></div></td><td colspan='5' class='scYear'>"+this._year+"</td><td><div class='scArrRight scYearChange'></div></td></tr><tr><td><div class='scArrLeft scMonthChange'></div></td><td colspan='5' class='scMonth'>"+this._date.getNewMonth()+"</td><td><div class='scArrRight scMonthChange'></div></td></tr><tr><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th><th>Su</th></tr><tr></thead>";t+="<tbody>";var e=this._date.getNewDay();for(e>0&&(t+="<th colspan="+e+"></th>");this._date.getMonth()===this._month;)t+="<td>"+this._date.getDate()+"</td>",6===this._date.getNewDay()&&this._date.getDate()!==this._date.getFullDay()&&(t+="</tr><tr>"),this._date.setDate(this._date.getDate()+1);this._date.setDate(this._date.getDate()-1),this._date.getNewDay()<6&&(t+="<th colspan="+(6-this._date.getNewDay())+"></th>"),t+="</tr></tbody></table>",this._table.innerHTML=t},t.prototype._clickEvent=function(t){var e=t.target;if(e.closest("thead"))e.classList.contains("scYearChange")?e.classList.contains("scArrLeft")?this._changeYear("prev"):e.classList.contains("scArrRight")&&this._changeYear("next"):e.classList.contains("scMonthChange")&&(e.classList.contains("scArrLeft")?this._changeMonth("prev"):e.classList.contains("scArrRight")&&this._changeMonth("next"));else{if("TD"!==e.tagName)return;var a=document.createEvent("CustomEvent");a.initCustomEvent("selectDate",!0,!0,{nowDate:new Date(this._year,this._month,+e.innerHTML)}),this._elem.dispatchEvent(a)}},t.prototype._changeMonth=function(t){switch(this._oldDate=this._date,this._eventName="changeMonth",t){case"next":this._month<11&&this.setDate(this._year,this._month+1);break;case"prev":this._month>0&&this.setDate(this._year,this._month-1)}},t.prototype._changeYear=function(t){switch(this._oldDate=this._date,this._eventName="changeYear",t){case"next":this.setDate(++this._year,this._month);break;case"prev":this.setDate(--this._year,this._month)}},t.prototype._redrawCalendar=function(){this._date=new Date(this._year,this._month),this._createCalendar();var t=document.createEvent("CustomEvent");t.initCustomEvent(this._eventName,!0,!0,{nowDate:new Date(this._year,this._month),oldDate:new Date(this._oldDate.getFullYear(),this._oldDate.getMonth())}),this._elem.dispatchEvent(t),0===this._month&&this._table.querySelector(".scArrLeft.scMonthChange").classList.add("hidden"),11===this._month&&this._table.querySelector(".scArrRight.scMonthChange").classList.add("hidden")},t.prototype.setDate=function(t,e){0>e||e>11||(this._year=t,this._month=e,this._redrawCalendar())},t}();